<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Media Stream · peer-data</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## [Media Capture and Streams Concepts and Usage](https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API#Media_Capture_and_Streams_Concepts_and_Usage)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Media Stream · peer-data"/><meta property="og:type" content="website"/><meta property="og:url" content="https://rafallorenz.com/peer-data/"/><meta property="og:description" content="## [Media Capture and Streams Concepts and Usage](https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API#Media_Capture_and_Streams_Concepts_and_Usage)"/><meta property="og:image" content="https://rafallorenz.com/peer-data/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://rafallorenz.com/peer-data/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/peer-data/favicon/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/darcula.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-42622274-2', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/peer-data/js/scrollSpy.js"></script><link rel="stylesheet" href="/peer-data/css/main.css"/><script src="/peer-data/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/peer-data/"><img class="logo" src="/peer-data/favicon/ms-icon-310x310.png" alt="peer-data"/><h2 class="headerTitleWithLogo">peer-data</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/peer-data/docs/installation" target="_self">Docs</a></li><li class=""><a href="/peer-data/help" target="_self">Help</a></li><li class=""><a href="https://github.com/vardius/peer-data" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Connection</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Quick Start<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/peer-data/docs/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/peer-data/docs/client">Basic Example</a></li><li class="navListItem"><a class="navItem" href="/peer-data/docs/signaling">Signaling Server</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Connection<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/peer-data/docs/data-channel">Data Channel</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/peer-data/docs/media-stream">Media Stream</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Examples<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/peer-data/docs/error">Error Handling</a></li><li class="navListItem"><a class="navItem" href="/peer-data/docs/local">Local connection</a></li><li class="navListItem"><a class="navItem" href="/peer-data/docs/socket">Socket signalling channel</a></li><li class="navListItem"><a class="navItem" href="/peer-data/docs/data">Data channel example</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Media Stream</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="media-capture-and-streams-concepts-and-usagehttpsdevelopermozillaorgen-usdocswebapimedia_streams_apimedia_capture_and_streams_concepts_and_usage"></a><a href="#media-capture-and-streams-concepts-and-usagehttpsdevelopermozillaorgen-usdocswebapimedia_streams_apimedia_capture_and_streams_concepts_and_usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API#Media_Capture_and_Streams_Concepts_and_Usage">Media Capture and Streams Concepts and Usage</a></h2>
<p>The Media Capture and Streams API, often called the Media Streams API or simply MediaStream API, is an API related to WebRTC which provides support for streaming audio and video data.
It provides the interfaces and methods for working with the streams and their constituent tracks, the constraints associated with data formats, the success and error callbacks when using the data asynchronously, and the events that are fired during the process.</p>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// get video/voice stream</span>
navigator.getUserMedia({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> }, gotMedia, () =&gt; {})

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gotMedia</span> (<span class="hljs-params">stream</span>) </span>{
    <span class="hljs-comment">// passing stream is optional, if passed will be shared between all peers in current room</span>
    <span class="hljs-keyword">const</span> room = peerData.connect(<span class="hljs-string">'test-room'</span>, stream);

    room.on(<span class="hljs-string">"participant"</span>, participant =&gt; {
        <span class="hljs-comment">//this peer shared a stream</span>
        participant.on(<span class="hljs-string">"track"</span>, event =&gt; {
          <span class="hljs-keyword">const</span> stream = event.streams[<span class="hljs-number">0</span>];
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"track"</span>, event, stream);
        });
    });
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="add-stream-to-existing-connection"></a><a href="#add-stream-to-existing-connection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add stream to existing connection</h2>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> PeerData <span class="hljs-keyword">from</span> <span class="hljs-string">'peer-data'</span>;

<span class="hljs-keyword">const</span> servers = {
  <span class="hljs-attr">iceServers</span>: [
    {<span class="hljs-attr">urls</span>: <span class="hljs-string">"stun:stun.1.google.com:19302"</span>}
  ]
};

<span class="hljs-keyword">const</span> peerData = <span class="hljs-keyword">new</span> PeerData(servers);
<span class="hljs-keyword">const</span> room = peerData.connect(<span class="hljs-string">'test-room'</span>);

room.on(<span class="hljs-string">"participant"</span>, participant =&gt; {
  navigator.mediaDevices
    .getUserMedia({<span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>})
    .then(<span class="hljs-function"><span class="hljs-params">stream</span> =&gt;</span> {
      participant.addStream(stream);
      participant.renegotiate();
    });
});
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/peer-data/docs/data-channel"><span class="arrow-prev">← </span><span>Data Channel</span></a><a class="docs-next button" href="/peer-data/docs/error"><span>Error Handling</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#media-capture-and-streams-concepts-and-usagehttpsdevelopermozillaorgen-usdocswebapimedia_streams_apimedia_capture_and_streams_concepts_and_usage"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API#Media_Capture_and_Streams_Concepts_and_Usage">Media Capture and Streams Concepts and Usage</a></a></li><li><a href="#example">Example</a></li><li><a href="#add-stream-to-existing-connection">Add stream to existing connection</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/peer-data/" class="nav-home"><img src="/peer-data/favicon/ms-icon-310x310.png" alt="peer-data" width="66" height="58"/></a><div><h5>Docs</h5><a href="/peer-data/docs/en/installation.html">Documentation</a></div><div><h5>Community</h5><a href="https://github.com/sponsors/vardius">Support</a></div><div><h5>More</h5><a href="https://rafallorenz.com">rafallorenz.com</a><a href="https://github.com/vardius/peer-data">GitHub</a><a class="github-button" href="https://github.com/vardius/peer-data" data-icon="octicon-star" data-count-href="/vardius/peer-data/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2021 Rafał Lorenz</section></footer></div></body></html>